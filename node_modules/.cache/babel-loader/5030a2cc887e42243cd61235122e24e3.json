{"ast":null,"code":"import consumer from \"./consumer\"; // turbolinks の読み込みが終わった後にidを取得しないと，エラーが出ます。\n\ndocument.addEventListener('turbolinks:load', function () {\n  // js.erb 内で使用できるように変数を定義しておく\n  window.messageContainer = document.getElementById('message-container'); // 以下のプログラムが他のページで動作しないようにしておく\n\n  if (messageContainer === null) {\n    return;\n  }\n\n  consumer.subscriptions.create(\"RoomChannel\", {\n    connected: function connected() {},\n    disconnected: function disconnected() {},\n    received: function received(data) {\n      // サーバー側から受け取ったHTMLを一番最後に加える\n      messageContainer.insertAdjacentHTML('beforeend', data['message']);\n    }\n  });\n  var documentElement = document.documentElement; // js.erb 内でも使用できるように変数を決定\n\n  window.messageContent = document.getElementById('message_content'); // 一番下まで移動する関数。js.erb 内でも使用できるように変数を決定\n\n  window.scrollToBottom = function () {\n    window.scroll(0, documentElement.scrollHeight);\n  }; // 最初にページ一番下へ移動させる\n\n\n  scrollToBottom();\n});","map":{"version":3,"sources":["C:/Users/keisu/eclipse-workspace/chatApp_sample5/app/javascript/channels/room_channel.js"],"names":["consumer","document","addEventListener","window","messageContainer","getElementById","subscriptions","create","connected","disconnected","received","data","insertAdjacentHTML","documentElement","messageContent","scrollToBottom","scroll","scrollHeight"],"mappings":"AAAA,OAAOA,QAAP,MAAqB,YAArB,C,CAEA;;AACAC,QAAQ,CAACC,gBAAT,CAA0B,iBAA1B,EAA6C,YAAM;AAE/C;AACAC,EAAAA,MAAM,CAACC,gBAAP,GAA0BH,QAAQ,CAACI,cAAT,CAAwB,mBAAxB,CAA1B,CAH+C,CAK/C;;AACA,MAAID,gBAAgB,KAAK,IAAzB,EAA+B;AAC3B;AACH;;AAEDJ,EAAAA,QAAQ,CAACM,aAAT,CAAuBC,MAAvB,CAA8B,aAA9B,EAA6C;AACzCC,IAAAA,SADyC,uBAC7B,CACX,CAFwC;AAIzCC,IAAAA,YAJyC,0BAI1B,CACd,CALwC;AAOzCC,IAAAA,QAPyC,oBAOhCC,IAPgC,EAO1B;AACX;AACAP,MAAAA,gBAAgB,CAACQ,kBAAjB,CAAoC,WAApC,EAAiDD,IAAI,CAAC,SAAD,CAArD;AACH;AAVwC,GAA7C;AAaC,MAAME,eAAe,GAAGZ,QAAQ,CAACY,eAAjC,CAvB8C,CAwB/C;;AACAV,EAAAA,MAAM,CAACW,cAAP,GAAwBb,QAAQ,CAACI,cAAT,CAAwB,iBAAxB,CAAxB,CAzB+C,CA0B/C;;AACAF,EAAAA,MAAM,CAACY,cAAP,GAAwB,YAAM;AAC1BZ,IAAAA,MAAM,CAACa,MAAP,CAAc,CAAd,EAAiBH,eAAe,CAACI,YAAjC;AACH,GAFD,CA3B+C,CA+B/C;;;AACAF,EAAAA,cAAc;AACjB,CAjCD","sourcesContent":["import consumer from \"./consumer\"\n\n// turbolinks の読み込みが終わった後にidを取得しないと，エラーが出ます。\ndocument.addEventListener('turbolinks:load', () => {\n\n    // js.erb 内で使用できるように変数を定義しておく\n    window.messageContainer = document.getElementById('message-container')\n\n    // 以下のプログラムが他のページで動作しないようにしておく\n    if (messageContainer === null) {\n        return\n    }\n\n    consumer.subscriptions.create(\"RoomChannel\", {\n        connected() {\n        },\n\n        disconnected() {\n        },\n\n        received(data) {\n            // サーバー側から受け取ったHTMLを一番最後に加える\n            messageContainer.insertAdjacentHTML('beforeend', data['message'])\n        }\n    })\n    \n     const documentElement = document.documentElement\n    // js.erb 内でも使用できるように変数を決定\n    window.messageContent = document.getElementById('message_content')\n    // 一番下まで移動する関数。js.erb 内でも使用できるように変数を決定\n    window.scrollToBottom = () => {\n        window.scroll(0, documentElement.scrollHeight)\n    }\n\n    // 最初にページ一番下へ移動させる\n    scrollToBottom()\n})"]},"metadata":{},"sourceType":"module"}